<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Round Manager</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"></script>
</head>
<body>
  <h1>Round Manager</h1>
  <div id="round-display">Current Round: <span id="current-round">1</span></div>
  <div id="hands-display">Hands this round: <span id="hands-count">1</span></div>
  <div id="score-inputs"></div>
  <button id="submit-scores">Submit Scores</button>
  <button id="advance-round" disabled>Advance to Next Round</button>
  <div id="game-status"></div>

  <script>
    const RoundManager = require(['./src/roundManager.js']);
    let rm = new RoundManager();
    updateDisplay();

    document.getElementById('submit-scores').addEventListener('click', () => {
      const inputs = document.querySelectorAll('.score-input');
      let allFilled = true;
      inputs.forEach((input, index) => {
        const score = parseFloat(input.value);
        if (isNaN(score)) {
          allFilled = false;
        } else {
          rm.addScore(index, score);
        }
      });
      if (!allFilled) {
        alert('Please fill all score inputs with valid numbers.');
        return;
      }
      document.getElementById('advance-round').disabled = !rm.isRoundComplete();
    });

    document.getElementById('advance-round').addEventListener('click', () => {
      if (rm.advanceRound()) {
        updateDisplay();
        if (rm.isGameOver()) {
          document.getElementById('game-status').textContent = 'Game Over!';
          document.getElementById('advance-round').disabled = true;
        }
      }
    });

    function updateDisplay() {
      document.getElementById('current-round').textContent = rm.getCurrentRound();
      document.getElementById('hands-count').textContent = rm.getHandsThisRound();
      const inputsDiv = document.getElementById('score-inputs');
      inputsDiv.innerHTML = '';
      for (let i = 0; i < rm.getHandsThisRound(); i++) {
        const input = document.createElement('input');
        input.type = 'number';
        input.className = 'score-input';
        input.placeholder = `Score for hand ${i + 1}`;
        inputsDiv.appendChild(input);
      }
      document.getElementById('advance-round').disabled = !rm.isRoundComplete();
    }
  </script>
</body>
</html>